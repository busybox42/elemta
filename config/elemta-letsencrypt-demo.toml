# Elemta SMTP Server Configuration - Let's Encrypt Demo/Testing
# Generated by test-letsencrypt-demo.sh at Sat Jun 21 02:47:43 PM EDT 2025

[server]
hostname = "mail.example.com"
listen = ":2525"
tls = true
queue_dir = "/app/queue"

# TLS Configuration with Let's Encrypt
[tls]
enabled = true
listen_addr = ":8465"
enable_starttls = true

# Let's Encrypt configuration
[tls.letsencrypt]
enabled = true
domain = "mail.example.com"
email = "you@example.com"
cache_dir = "/app/certs/letsencrypt"
staging = true
agree_tos = true

# Certificate renewal configuration
[tls.renewal]
auto_renew = true
renewal_days = 30
check_interval = "24h"
renewal_timeout = "5m"

[logging]
level = "debug"
format = "json"
file = "/app/logs/elemta-letsencrypt-demo.log"

[plugins]
directory = "/app/plugins"
enabled = []

[queue_processor]
enabled = true
interval = 10
workers = 2
debug = true

# Authentication - Simple file-based for demo
[auth] 
enabled = true
required = false
datasource_type = "file"

[auth.file]
path = "/app/config/users.json"

# Delivery Configuration
[delivery]
mode = "smtp"
timeout = 30

# HTTP server for ACME challenge (Let's Encrypt validation)
[http]
enabled = true
listen_addr = ":8080"
acme_challenge = true
